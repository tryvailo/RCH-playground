# –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥–±–æ—Ä–∞ —Ç–æ–ø 3 –¥–æ–º–æ–≤ –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –æ—Ç—á–µ—Ç–µ –¥–ª—è CQC + Staging –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–î–ê–ü–¢–ò–†–û–í–ê–ù–û  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô

---

## üìä –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ê–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç—á–∏–Ω–≥–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ CQC + Staging. –í–Ω–µ—Å–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç–æ–¥–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–±–µ–∏—Ö –±–∞–∑.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –û–±–Ω–æ–≤–ª–µ–Ω `_get_home_price()` 

**–§–∞–π–ª:** `src/free_report_viewer/services/matching_service.py` (—Å—Ç—Ä–æ–∫–∞ 666)

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `extract_weekly_price()` –∏–∑ `utils.price_extractor`
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try/except –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –Ω–∞ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**
- `extract_weekly_price()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ CQC + Staging
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –∏–∑ Staging:**
- `fee_residential_from` (Staging preferred)
- `fee_dementia_from` (Staging preferred)
- `fee_nursing_from` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)
- `fee_respite_from` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)

---

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –û–±–Ω–æ–≤–ª–µ–Ω `calculate_50_point_score_v3()`

**–§–∞–π–ª:** `src/free_report_viewer/services/matching_service.py` (—Å—Ç—Ä–æ–∫–∞ 1211)

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_availability_info()` –∏–∑ `db_field_extractor`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è –∏ JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –Ω–∞ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**
- `get_availability_info()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è, –∏ JSONB
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ NULL –∑–Ω–∞—á–µ–Ω–∏–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –∏–∑ Staging:**
- `beds_available` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)
- `has_availability` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)
- `beds_total` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)

---

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: –û–±–Ω–æ–≤–ª–µ–Ω `select_3_strategic_homes_simple()`

**–§–∞–π–ª:** `src/free_report_viewer/services/matching_service.py` (—Å—Ç—Ä–æ–∫–∞ 1317)

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_review_data()` –∏–∑ `db_field_extractor`
- ‚úÖ –ü—Ä–µ–¥–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ review –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –Ω–∞ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**
- `get_review_data()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `review_average_score`, `review_count`, `google_rating`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `reviews_detailed`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –∏–∑ Staging:**
- `review_average_score` (Staging preferred)
- `review_count` (Staging preferred)
- `google_rating` (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging)

---

## üìã –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π –≤ –ø–æ–¥–±–æ—Ä–µ —Ç–æ–ø 3

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: Safe Bet (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞:**
```python
key=lambda h: (
    h['scores'].get('safety', 0),    # ‚Üê CQC rating (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)
    h['scores'].get('quality', 0),  # ‚Üê CQC rating (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)
    h['match_score']
)
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è:**
- ‚úÖ `cqc_rating_safe` - –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è)
- ‚úÖ `cqc_rating_overall` - –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è)
- ‚úÖ `fsa_rating` - –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging (–Ω–æ –æ–±—ã—á–Ω–æ –∏–∑ CQC)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∏–∑ CQC

---

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: Best Reputation (–õ—É—á—à–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ (–î–û –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```python
key=lambda h: (
    h['scores'].get('quality', 0),
    h.get('google_rating', 0) or 0,  # ‚Üê –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø
    h.get('review_count', 0) or h.get('user_ratings_total', 0) or 0,  # ‚Üê –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø
    h['match_score']
)
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ (–ü–û–°–õ–ï –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```python
key=lambda h: (
    h['scores'].get('quality', 0),
    h.get('_google_rating', 0),  # ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç get_review_data()
    h.get('_review_count', 0),   # ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç get_review_data()
    h['match_score']
)
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è:**
- ‚úÖ `cqc_rating_overall` - –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)
- ‚úÖ `review_average_score` - –∏–∑ Staging (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ)
- ‚úÖ `review_count` - –∏–∑ Staging (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ)
- ‚úÖ `google_rating` - –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_review_data()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: Smart Value (–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞:**
```python
# –í—ã—á–∏—Å–ª—è–µ–º value_ratio
price = self._get_home_price(home, user_inputs.care_type)  # ‚Üê –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç extract_weekly_price()
quality_total = home['scores'].get('quality', 0) + home['scores'].get('safety', 0)
home['value_ratio'] = quality_total / (price / 100)

key=lambda h: (
    h.get('value_ratio', 0),
    h['scores'].get('budget', 0),  # ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç _get_home_price() ‚Üí extract_weekly_price()
    h['scores'].get('quality', 0),
    h['match_score']
)
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è:**
- ‚úÖ `fee_residential_from` - –∏–∑ Staging (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ)
- ‚úÖ `fee_dementia_from` - –∏–∑ Staging (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ)
- ‚úÖ `fee_nursing_from` - –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ Staging
- ‚úÖ `cqc_rating_overall` - –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)
- ‚úÖ `cqc_rating_safe` - –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `extract_weekly_price()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –í–ª–∏—è–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –ø–æ–¥–±–æ—Ä —Ç–æ–ø 3

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **Budget Score (8 points):**
   - ‚ö†Ô∏è –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ü–µ–Ω—ã –∏–∑ Staging, –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π –æ—Ç–ª–∏—á–∞–ª–∏—Å—å
   - ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `extract_weekly_price()` —Å –µ–≥–æ –ª–æ–≥–∏–∫–æ–π fallback

2. **Availability Score (6 points):**
   - ‚ö†Ô∏è –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å availability –¥–∞–Ω–Ω—ã–µ –∏–∑ Staging –≤ JSONB
   - ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `get_availability_info()` —Å –µ–≥–æ –ª–æ–≥–∏–∫–æ–π fallback

3. **Best Reputation:**
   - ‚ö†Ô∏è –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å `review_average_score` –∏–∑ Staging
   - ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `get_review_data()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JSONB

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **Budget Score (8 points):**
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—ã –∏–∑ Staging —á–µ—Ä–µ–∑ `extract_weekly_price()`
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

2. **Availability Score (6 points):**
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç availability –¥–∞–Ω–Ω—ã–µ –∏–∑ Staging —á–µ—Ä–µ–∑ `get_availability_info()`
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è –∏ JSONB
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –ª–æ–≥–∏–∫—É

3. **Best Reputation:**
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç reviews –∏–∑ Staging —á–µ—Ä–µ–∑ `get_review_data()`
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `review_average_score`, `review_count`, `google_rating`
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π Budget Match

**–î–æ:**
- –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–æ–º–∞ —Å —Ü–µ–Ω–∞–º–∏ –∏–∑ Staging
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ü–µ–Ω

**–ü–æ—Å–ª–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—ã –∏–∑ CQC –∏ Staging
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π scoring –¥–ª—è Budget Match (8 points)

---

### 2. –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π Availability Score

**–î–æ:**
- –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å availability –¥–∞–Ω–Ω—ã–µ –∏–∑ Staging
- –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ü–æ—Å–ª–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç availability –¥–∞–Ω–Ω—ã–µ –∏–∑ CQC –∏ Staging
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è –∏ JSONB
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π scoring –¥–ª—è Availability (6 points)

---

### 3. –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π Best Reputation

**–î–æ:**
- –ú–æ–≥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å reviews –∏–∑ Staging
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `review_average_score` –∏–∑ Staging

**–ü–æ—Å–ª–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç reviews –∏–∑ CQC –∏ Staging
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç `review_average_score` –∏ `review_count` –∏–∑ Staging
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–æ–º–∞ —Å –ª—É—á—à–µ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π

### –ü–æ–ª—è –∏–∑ CQC (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è):

| –ü–æ–ª–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|---------------|--------|
| `cqc_rating_overall` | Quality Score (8 pts) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `cqc_rating_safe` | Safety Score (10 pts) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `location_id` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–º–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `latitude`, `longitude` | Location Score (8 pts) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `care_types` | Medical Score (10 pts) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

### –ü–æ–ª—è –∏–∑ Staging (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –µ—Å–ª–∏ –µ—Å—Ç—å):

| –ü–æ–ª–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|---------------|--------|
| `fee_residential_from` | Budget Score (8 pts) | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `fee_dementia_from` | Budget Score (8 pts) | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `fee_nursing_from` | Budget Score (8 pts) | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `beds_available` | Availability Score (6 pts) | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `has_availability` | Availability Score (6 pts) | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `review_average_score` | Best Reputation | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `review_count` | Best Reputation | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ü–µ–Ω –∏–∑ Staging

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –î–æ–º –≤ CQC –±–µ–∑ —Ü–µ–Ω—ã, –Ω–æ —Å —Ü–µ–Ω–æ–π –≤ Staging
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `_get_home_price()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–Ω—É –∏–∑ Staging
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Budget Score –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É —Ü–µ–Ω—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¶–µ–Ω–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ Staging
- ‚úÖ Budget Score —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è availability –∏–∑ Staging

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –î–æ–º –≤ CQC –±–µ–∑ availability, –Ω–æ —Å availability –≤ Staging
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `get_availability_info()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Staging
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Availability Score –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Availability –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ Staging
- ‚úÖ Availability Score —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è reviews –∏–∑ Staging

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –î–æ–º –≤ CQC –±–µ–∑ reviews, –Ω–æ —Å reviews –≤ Staging
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `get_review_data()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Staging
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Best Reputation –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Reviews –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ Staging
- ‚úÖ Best Reputation –≤—ã–±–∏—Ä–∞–µ—Ç –¥–æ–º —Å –ª—É—á—à–∏–º–∏ reviews

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã:**
- ‚úÖ `_get_home_price()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `extract_weekly_price()`
- ‚úÖ `calculate_50_point_score_v3()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `get_availability_info()`
- ‚úÖ `select_3_strategic_homes_simple()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `get_review_data()`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç—á–∏–Ω–≥–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ CQC + Staging
- ‚úÖ –ü–æ–¥–±–æ—Ä —Ç–æ–ø 3 –¥–æ–º–æ–≤ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–µ–∏—Ö –±–∞–∑
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å Professional Report (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ –∂–µ —É—Ç–∏–ª–∏—Ç—ã)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

