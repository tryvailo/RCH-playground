# CQC Database Update Script - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è CQC –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API, –∑–∞–ø–æ–ª–Ω—è—è –ø—É—Å—Ç—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è.

## ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å

**–î–ê, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ!**

- ‚úÖ CQC API –¥–æ—Å—Ç—É–ø–µ–Ω (2000 req/min —Å Partner Code)
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ API
- ‚úÖ –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 7-10 –º–∏–Ω—É—Ç –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend
cd backend

# –°–æ–∑–¥–∞—Ç—å backup
cp ../documents/report-algorithms/cqc_carehomes_master_full_data_rows.csv \
   ../documents/report-algorithms/cqc_carehomes_master_full_data_rows.csv.backup

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á–∏
cat config.json | grep -A 2 cqc
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Dry-run (—Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑)
python3 scripts/update_cqc_database.py --dry-run --limit 10

# –¢–µ—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
python3 scripts/update_cqc_database.py --limit 10
```

### 3. –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
python3 scripts/update_cqc_database.py --batch-size 30 --delay 1.0

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
nohup python3 scripts/update_cqc_database.py \
    --batch-size 30 \
    --delay 1.0 \
    > cqc_update.log 2>&1 &
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ CQC Ratings: 100% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–±—ã–ª–æ 93.5%)
- ‚úÖ Service User Bands: >95% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–±—ã–ª–æ 84.3%)
- ‚úÖ Inspection Dates: >90% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ Beds: >80% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏
- –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ CSV —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `load_cqc_homes()` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer (–º–∞–ø–ø–∏–Ω–≥ DB ‚Üí CSV —Ñ–æ—Ä–º–∞—Ç)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞

