# –ê–Ω–∞–ª–∏–∑: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CQC –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API

**–î–∞—Ç–∞:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–°–¢–ò–ß–ù–û –ò –í–û–ó–ú–û–ñ–ù–û

---

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### **–î–∞–Ω–Ω—ã–µ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞:**

- **–í—Å–µ–≥–æ –¥–æ–º–æ–≤:** 14,599
- **–¢—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
  - –ë–µ–∑ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤: 956 –¥–æ–º–æ–≤ (6.5%)
  - –ë–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç: 4 –¥–æ–º–∞ (0.0%)
  - –ë–µ–∑ Service User Bands: 2,293 –¥–æ–º–∞ (15.7%)

### **–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–ü—É—Å—Ç—ã–µ –ø–æ–ª—è –≤ CSV:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º CSV
   - –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ CQC API, –Ω–æ –Ω–µ –º–∞–ø–ø—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ ETL –ø—Ä–æ—Ü–µ—Å—Å–µ

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ
   - API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å

### **–î–ê, —ç—Ç–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ!**

**–ü—Ä–∏—á–∏–Ω—ã:**

1. ‚úÖ **CQC API –¥–æ—Å—Ç—É–ø–µ–Ω:**
   - –ü—É–±–ª–∏—á–Ω—ã–π API (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
   - –° Partner Code: **2000 requests/min**
   - –ë–µ–∑ Partner Code: ~100 requests/min (–æ—Ü–µ–Ω–∫–∞)

2. ‚úÖ **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ API:**
   - CQC Ratings (overall, safe, effective, caring, responsive, well-led)
   - Service User Bands (12 –ø–æ–ª–µ–π) - —á–µ—Ä–µ–∑ `specialisms[]` –∏–ª–∏ `gacServiceTypes[]`
   - Location (coordinates, postcode, city, local authority)
   - Care Types (nursing, residential, dementia) - —á–µ—Ä–µ–∑ `serviceTypes[]`
   - Inspection Dates - —á–µ—Ä–µ–∑ `publicationDate` –∏–ª–∏ `lastInspectionDate`
   - Beds - —á–µ—Ä–µ–∑ `beds` –∏–ª–∏ `numberOfBeds`

3. ‚úÖ **–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:**
   - –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (`nohup` –∏–ª–∏ `screen`)

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

### **–° Partner Code (2000 req/min):**

- **–í—Å–µ–≥–æ API –≤—ã–∑–æ–≤–æ–≤:** 14,599
- **–í—Ä–µ–º—è:** ~7.3 –º–∏–Ω—É—Ç (0.12 —á–∞—Å–æ–≤)
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:** ‚úÖ –î–∞, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞ –Ω–æ—á—å

### **–ë–µ–∑ Partner Code (~100 req/min):**

- **–í—Ä–µ–º—è:** ~146 –º–∏–Ω—É—Ç (2.4 —á–∞—Å–∞)
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:** ‚ö†Ô∏è –î–æ–ª–≥–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ

### **–° –±–∞—Ç—á–∏–Ω–≥–æ–º –∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏:**

- **Batch size:** 30 –¥–æ–º–æ–≤
- **Delay –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏:** 1 —Å–µ–∫—É–Ω–¥–∞
- **–í—Ä–µ–º—è:** ~8-10 –º–∏–Ω—É—Ç (—Å —É—á–µ—Ç–æ–º –∑–∞–¥–µ—Ä–∂–µ–∫)
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:** ‚úÖ –î–∞, –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

---

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç:** `scripts/update_cqc_database.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–æ–º–∞ –∏–∑ CQC CSV —á–µ—Ä–µ–∑ `load_cqc_homes()`
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ–º–∞, —Ç—Ä–µ–±—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

2. ‚úÖ **API –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –í—ã–∑—ã–≤–∞–µ—Ç `cqc_client.get_location(location_id)` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∞
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ API response
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—É—Å—Ç—ã–µ/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è

3. ‚úÖ **–ë–∞—Ç—á–∏–Ω–≥:**
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–º–∞ –±–∞—Ç—á–∞–º–∏ (30 –¥–æ–º–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ (rate limiting)
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ –±–∞—Ç—á–∞ (`asyncio.gather`)

4. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª (`cqc_update.log`) –∏ –∫–æ–Ω—Å–æ–ª—å
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

5. ‚úÖ **Dry-run —Ä–µ–∂–∏–º:**
   - –ê–Ω–∞–ª–∏–∑ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ

6. ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API:**
   - `extract_ratings_from_api()` - CQC —Ä–µ–π—Ç–∏–Ω–≥–∏
   - `extract_service_user_bands_from_api()` - Service User Bands
   - `extract_location_from_api()` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∞–¥—Ä–µ—Å
   - `extract_care_types_from_api()` - —Ç–∏–ø—ã —É—Ö–æ–¥–∞
   - `extract_inspection_date_from_api()` - –¥–∞—Ç–∞ –∏–Ω—Å–ø–µ–∫—Ü–∏–∏
   - `extract_beds_from_api()` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–æ–≤–∞—Ç–µ–π

---

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# Dry-run (—Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑)
python3 scripts/update_cqc_database.py --dry-run

# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –¥–æ–º–∞
python3 scripts/update_cqc_database.py

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 100 –¥–æ–º–æ–≤ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
python3 scripts/update_cqc_database.py --limit 100

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è
python3 scripts/update_cqc_database.py --fields cqc_rating_overall,latitude,longitude

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CSV writer)
python3 scripts/update_cqc_database.py --output updated_cqc_database.csv
```

### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `--dry-run`: –¢–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑, –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `--limit N`: –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ N –¥–æ–º–æ–≤
- `--fields field1,field2`: –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `--output path`: –ü—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É CSV —Ñ–∞–π–ª—É (—Ç—Ä–µ–±—É–µ—Ç CSV writer)
- `--batch-size N`: –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
- `--delay N`: –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0)

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **Rate Limiting:**

1. **–° Partner Code:**
   - –õ–∏–º–∏—Ç: 2000 requests/min
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: `batch_size=30`, `delay=1.0s`
   - –≠—Ç–æ –¥–∞–µ—Ç ~1800 requests/min (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø–∞—Å)

2. **–ë–µ–∑ Partner Code:**
   - –õ–∏–º–∏—Ç: ~100 requests/min (–æ—Ü–µ–Ω–∫–∞)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: `batch_size=5`, `delay=3.0s`
   - –≠—Ç–æ –¥–∞–µ—Ç ~100 requests/min

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**

- ‚úÖ Retry logic –¥–ª—è 429 (rate limit) - –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ `CQCAPIClient`
- ‚úÖ Fallback –Ω–∞ secondary subscription key - –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ `CQCAPIClient`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–æ–º–æ–≤

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–æ–∑–¥–∞—Ç—å backup CSV –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--output` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª (–ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CSV writer)

2. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–∞—á–∞—Ç—å —Å `--limit 10` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--dry-run` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

3. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ (`cqc_update.log`)
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

4. ‚úÖ **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
   - –ó–∞–ø—É—Å–∫–∞—Ç—å –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è (–Ω–æ—á—å)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `nohup` –∏–ª–∏ `screen` –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

- ‚úÖ **CQC Ratings:** 100% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–±—ã–ª–æ 93.5%)
- ‚úÖ **Coordinates:** 100% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–±—ã–ª–æ 100.0%)
- ‚úÖ **Service User Bands:** >95% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–±—ã–ª–æ 84.3%)
- ‚úÖ **Inspection Dates:** >90% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **Beds:** >80% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å

### **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö:**

- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ (–∏–∑ API, –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)
- ‚úÖ –ü–æ–ª–Ω—ã–µ Service User Bands (–∏–∑ API)
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã –∏–Ω—Å–ø–µ–∫—Ü–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

---

## üöÄ –ü–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (5 –º–∏–Ω—É—Ç)**

```bash
# 1. –°–æ–∑–¥–∞—Ç—å backup
cp documents/report-algorithms/cqc_carehomes_master_full_data_rows.csv \
   documents/report-algorithms/cqc_carehomes_master_full_data_rows.csv.backup

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á–∏
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ CQC subscription keys –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ config.json
cat backend/config.json | grep -A 2 cqc
```

### **–≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (10 –º–∏–Ω—É—Ç)**

```bash
# 1. Dry-run –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
cd backend
python3 scripts/update_cqc_database.py --dry-run --limit 10

# 2. –¢–µ—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤ –ø–∞–º—è—Ç–∏)
python3 scripts/update_cqc_database.py --limit 10

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -50 cqc_update.log
```

### **–≠—Ç–∞–ø 3: –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (10-15 –º–∏–Ω—É—Ç)**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
cd backend
python3 scripts/update_cqc_database.py \
    --batch-size 30 \
    --delay 1.0

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
nohup python3 scripts/update_cqc_database.py \
    --batch-size 30 \
    --delay 1.0 \
    > cqc_update.log 2>&1 &
```

### **–≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
tail -50 cqc_update.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
# (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CSV writer –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏:**
   - –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏
   - –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ CSV —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer
   - CSV writer –¥–æ–ª–∂–µ–Ω –º–∞–ø–ø–∏—Ç—å DB —Ñ–æ—Ä–º–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ CSV —Ñ–æ—Ä–º–∞—Ç

2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `load_cqc_homes()`
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. ‚ö†Ô∏è **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer:**
   - –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ CSV
   - –ú–∞–ø–ø–∏–Ω–≥ DB —Ñ–æ—Ä–º–∞—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ CSV —Ñ–æ—Ä–º–∞—Ç
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ CSV

2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø–∞–º—è—Ç–∏
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞
   - –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CSV

---

## ‚úÖ –í—ã–≤–æ–¥

**–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è CQC –±–∞–∑—ã —á–µ—Ä–µ–∑ API?**

‚úÖ **–î–ê, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ!**

**–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ?**

‚úÖ **–î–ê, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ!**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

1. ‚úÖ –ë—ã—Å—Ç—Ä–æ (7-10 –º–∏–Ω—É—Ç –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–æ–≤ —Å Partner Code)
2. ‚úÖ –ù–∞–¥–µ–∂–Ω–æ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, retry logic, fallback keys)
3. ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ (dry-run —Ä–µ–∂–∏–º, backup, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (–±–∞—Ç—á–∏–Ω–≥, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

‚úÖ **–°–æ–∑–¥–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–ö–†–ò–ü–¢ –°–û–ó–î–ê–ù –ò –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ CSV —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CSV writer (–º–∞–ø–ø–∏–Ω–≥ DB ‚Üí CSV —Ñ–æ—Ä–º–∞—Ç).
