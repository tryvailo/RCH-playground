# üìä CareHome.co.uk Reviews Extraction & Semantic Analysis

## –û–±–∑–æ—Ä

CareHome.co.uk ‚Äî –≥–ª–∞–≤–Ω—ã–π UK-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—Ç–∑—ã–≤–æ–≤ –æ –¥–æ–º–∞—Ö –ø—Ä–µ—Å—Ç–∞—Ä–µ–ª—ã—Ö —Å **400,000+ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤**.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö care homes:
- ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** ‚Äî –ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π UK care home –∏–º–µ–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å
- ‚úÖ **–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã** ‚Äî –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏** ‚Äî 11 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Staff, Care, Cleanliness, etc.)
- ‚úÖ **–°–≤—è–∑—å reviewer'–∞** ‚Äî –∏–∑–≤–µ—Å—Ç–Ω–æ –∫—Ç–æ –æ—Å—Ç–∞–≤–∏–ª (–¥–æ—á—å, —Å—ã–Ω, –∂–µ–Ω–∞ —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞)
- ‚úÖ **–û—Ç–∑—ã–≤—ã –æ—Ç —Å–µ–º–µ–π** ‚Äî –∫–æ—Å–≤–µ–Ω–Ω–æ –æ—Ç—Ä–∞–∂–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

---

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö CareHome.co.uk

### URL Pattern
```
https://www.carehome.co.uk/carehome.cfm/searchazref/{ID}
https://www.carehome.co.uk/carehome.cfm/searchazref/{ID}/startpage/{PAGE}
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- **20 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É**
- –°—Ç—Ä–∞–Ω–∏—Ü—ã: `/startpage/1`, `/startpage/2`, etc.
- –ú–∞–∫—Å–∏–º—É–º ~100+ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –¥–æ–º–æ–≤

### Review Score (0-10)
–ê–ª–≥–æ—Ä–∏—Ç–º:
- 5 –±–∞–ª–ª–æ–≤ –∑–∞ Average Rating (1-5 –∑–≤–µ–∑–¥)
- 5 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –∑–∞ 24 –º–µ—Å—è—Ü–∞

### Rating Categories (11)
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| Overall Experience | –û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ 1-5 |
| Facilities | –ü–æ–º–µ—â–µ–Ω–∏—è, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ |
| Care / Support | –ö–∞—á–µ—Å—Ç–≤–æ —É—Ö–æ–¥–∞ |
| Cleanliness | –ß–∏—Å—Ç–æ—Ç–∞ |
| Treated with Dignity | –£–≤–∞–∂–µ–Ω–∏–µ –∫ —Ä–µ–∑–∏–¥–µ–Ω—Ç—É |
| Food & Drink | –ü–∏—Ç–∞–Ω–∏–µ |
| **Staff** | ‚≠ê –ü–µ—Ä—Å–æ–Ω–∞–ª ‚Äî –∫–ª—é—á–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ |
| Activities | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –¥–æ—Å—É–≥ |
| **Management** | ‚≠ê –ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—á–∫–∏ |
| Safety / Security | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| Rooms | –ö–æ–º–Ω–∞—Ç—ã |
| Value for Money | –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ |

### Reviewer Connections
```
- Daughter of Resident/Service User (—Å–∞–º—ã–π —á–∞—Å—Ç—ã–π)
- Son of Resident/Service User
- Wife/Husband of Resident
- Resident / Service User (—Å–∞–º –ø—Ä–æ–∂–∏–≤–∞—é—â–∏–π)
- Friend, Niece, Nephew, etc.
```

---

## üõ†Ô∏è –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### –®–∞–≥ 1: –ü–æ–∏—Å–∫ Care Home
```python
# Google Custom Search API
query = f'"{care_home_name}" {postcode} site:carehome.co.uk'

# –ò–∑–≤–ª–µ–∫–∞–µ–º searchazref ID –∏–∑ URL
# /carehome.cfm/searchazref/20001050HARA ‚Üí "20001050HARA"
```

### –®–∞–≥ 2: Scraping —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
```python
# Firecrawl –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
page_1 = scrape(f"{base_url}")
page_2 = scrape(f"{base_url}/startpage/2")
...
```

### –®–∞–≥ 3: LLM Extraction
```python
# GPT-4o-mini –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
{
    "reviewer_initials": "J S",
    "reviewer_connection": "Daughter of Resident",
    "date": "16 September 2025",
    "overall_rating": 5,
    "review_text": "Very happy with my dad's care...",
    "category_ratings": {
        "Staff": 5,
        "Care / Support": 5,
        "Management": 4
    }
}
```

---

## üß† –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

### Aspect-Based Sentiment Analysis

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Å–ø–µ–∫—Ç–∞ –∏—â–µ–º –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:

```python
ASPECT_KEYWORDS = {
    "staff_quality": {
        "positive": ["caring staff", "friendly staff", "kind staff", 
                     "professional", "dedicated", "lovely staff"],
        "negative": ["rude staff", "unprofessional", "staff shortage",
                     "understaffed", "high turnover", "agency staff"]
    },
    "care_quality": {
        "positive": ["excellent care", "wonderful care", "dignity",
                     "person-centered", "tailored care"],
        "negative": ["poor care", "neglected", "ignored", "complaints"]
    },
    "communication": {
        "positive": ["good communication", "kept informed", "responsive"],
        "negative": ["poor communication", "not informed", "unanswered"]
    },
    # ... –¥—Ä—É–≥–∏–µ –∞—Å–ø–µ–∫—Ç—ã
}
```

### Staff Quality Signals (–∏–∑ –æ—Ç–∑—ã–≤–æ–≤ —Å–µ–º–µ–π)

–°–µ–º—å–∏ —á–∞—Å—Ç–æ —É–ø–æ–º–∏–Ω–∞—é—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞:

```python
STAFF_SIGNALS = {
    "training": ["trained", "qualified", "NVQ", "diploma"],
    "tenure": ["long-serving", "been here years", "experienced", "new staff"],
    "morale": ["happy staff", "staff enjoy", "staff seem stressed"],
    "ratio": ["enough staff", "plenty of staff", "understaffed"],
    "turnover": ["same faces", "staff left", "always different"]
}
```

### –§–æ—Ä–º—É–ª–∞ Staff Quality Score

```python
# 1. –ë–∞–∑–æ–≤—ã–π –±–∞–ª–ª –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Staff" (0-100)
base_score = (avg_staff_rating / 5) * 100

# 2. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ sentiment analysis (-10 to +10)
sentiment_adjustment = staff_sentiment_score * 10

# 3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ management (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–æ—Ä–∞–ª–∏)
management_adjustment = management_sentiment_score * 5

final_score = base_score + sentiment_adjustment + management_adjustment
```

---

## üìà Output Structure

```json
{
    "care_home": {
        "name": "Harbledown Lodge Nursing Home",
        "postcode": "CT2 7NH"
    },
    "carehome_co_uk": {
        "searchazref": "20001050HARA",
        "url": "https://www.carehome.co.uk/carehome.cfm/searchazref/20001050HARA",
        "rating": 9.6,
        "total_reviews": 89
    },
    "reviews": [
        {
            "reviewer_initials": "J S",
            "reviewer_connection": "Daughter of Resident",
            "date": "16 September 2025",
            "overall_rating": 5,
            "review_text": "Very happy with my dad's care...",
            "category_ratings": {"Staff": 5, "Care / Support": 5}
        }
    ],
    "analysis": {
        "total_reviews": 50,
        "average_rating": 4.6,
        "rating_distribution": {5: 35, 4: 12, 3: 2, 2: 1},
        "aspect_sentiment": {
            "staff_quality": {
                "score": 0.85,
                "sentiment": "positive",
                "positive_mentions": 42,
                "negative_mentions": 3
            },
            "management": {
                "score": 0.72,
                "sentiment": "positive"
            }
        },
        "themes": {
            "caring_staff": 28,
            "good_communication": 15,
            "clean_environment": 12
        },
        "staff_quality_score": {
            "score": 87.5,
            "category": "EXCELLENT",
            "confidence": "high",
            "review_count": 50
        },
        "key_quotes": [
            {
                "text": "The staff are so caring and professional...",
                "rating": 5,
                "type": "positive"
            }
        ]
    }
}
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Python API
```python
from services.carehome_reviews_service import CareHomeReviewsService

service = CareHomeReviewsService(
    google_api_key="...",
    google_search_engine_id="...",
    firecrawl_client=firecrawl_client,
    openai_client=openai_client
)

result = await service.get_reviews_with_analysis(
    name="Harbledown Lodge Nursing Home",
    postcode="CT2 7NH",
    max_reviews=100
)

staff_score = result["analysis"]["staff_quality_score"]["score"]
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Staff Quality Service

```python
# –í staff_quality_service.py –¥–æ–±–∞–≤–∏—Ç—å:

# PRIORITY 0: CareHome.co.uk reviews (UK-specific, most comprehensive)
if self.carehome_reviews_service:
    carehome_result = await self.carehome_reviews_service.get_reviews_with_analysis(
        name=home_name,
        postcode=home_postcode,
        max_reviews=100
    )
    
    if carehome_result.get("success"):
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–∑—ã–≤—ã
        carehome_reviews = carehome_result.get("reviews", [])
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
        for review in carehome_reviews:
            reviews.append({
                "source": "CareHome.co.uk",
                "rating": review.get("overall_rating"),
                "sentiment": self._map_rating_to_sentiment(review.get("overall_rating")),
                "text": review.get("review_text"),
                "date": review.get("date"),
                "author": review.get("reviewer_initials"),
                "reviewer_type": review.get("reviewer_connection")  # –°–µ–º–µ–π–Ω–∞—è —Å–≤—è–∑—å
            })
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
        semantic_analysis = carehome_result.get("analysis", {})
        carehome_staff_score = semantic_analysis.get("staff_quality_score", {})
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### Rate Limiting
- CareHome.co.uk –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1-2 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- Firecrawl –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–ª–∞–Ω)

### –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö
- –û—Ç–∑—ã–≤—ã **–æ—Ç —Å–µ–º–µ–π**, –Ω–µ –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ö–æ—Å–≤–µ–Ω–Ω–æ –æ—Ç—Ä–∞–∂–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —á–µ—Ä–µ–∑:
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—é "Staff" —Ä–µ–π—Ç–∏–Ω–≥
  - –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –≤ —Ç–µ–∫—Å—Ç–µ
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—é "Management" –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–æ—Ä–∞–ª–∏

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
```
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–µ—Å–∞:
- CareHome.co.uk Staff rating: 30%
- Indeed/Glassdoor employee reviews: 30%
- CQC Well-Led + Effective: 30%
- CQC Report sentiment: 10%
```

---

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd backend
python -c "
import asyncio
from services.carehome_reviews_service import test_carehome_reviews
asyncio.run(test_carehome_reviews())
"
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `services/carehome_reviews_service.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
- `services/staff_quality_service.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Staff Quality Score
- `api_clients/google_custom_search_client.py` ‚Äî –ø–æ–∏—Å–∫ care home
- `api_clients/firecrawl_client.py` ‚Äî scraping
