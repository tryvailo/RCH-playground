# üìä –ê–Ω–∞–ª–∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è CQC –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞:** 2025-12-20  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù

---

## üéØ –ó–∞–¥–∞—á–∞

**–¶–µ–ª—å:** –û–±–Ω–æ–≤–∏—Ç—å `cqc_carehomes_master_full_data_rows.csv` –∏—Å–ø–æ–ª—å–∑—É—è CQC API –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π.

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### **1. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

**–§–∞–π–ª:** `scripts/update_cqc_database.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `cqc_carehomes_master_full_data_rows.csv`
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ CQC API
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

### **2. –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–ü–†–û–ë–õ–ï–ú–ê)**

**–ö–æ–¥ –≤ `update_cqc_database.py` (—Å—Ç—Ä–æ–∫–∏ 748-752):**
```python
# Save in same directory as original, with _UPDATED suffix
csv_dir = csv_path.parent
csv_stem = csv_path.stem
csv_suffix = csv_path.suffix
output_file = csv_dir / f"{csv_stem}_UPDATED{csv_suffix}"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª: `cqc_carehomes_master_full_data_rows_UPDATED.csv`
- ‚ùå **–ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª: `cqc_carehomes_master_full_data_rows.csv`

---

### **3. –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–ü–†–û–ë–õ–ï–ú–ê)**

**–ö–æ–¥ –≤ `cqc_data_loader.py` (—Å—Ç—Ä–æ–∫–∏ 258-261):**
```python
_possible_paths = [
    ... / "cqc_carehomes_master_full_data_rows.csv",  # –ë–ï–ó _UPDATED!
    ...
]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑: `cqc_carehomes_master_full_data_rows.csv`
- ‚ùå **–ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç** –¥–∞–Ω–Ω—ã–µ –∏–∑: `cqc_carehomes_master_full_data_rows_UPDATED.csv`

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

### **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π:**

1. **–°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª: `cqc_carehomes_master_full_data_rows_UPDATED.csv`
2. **–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª: `cqc_carehomes_master_full_data_rows.csv`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `_UPDATED.csv`
- ‚ùå –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏—è **–ù–ï –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** –≤ —Å–∏—Å—Ç–µ–º–µ

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### **CQC –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

1. **`cqc_carehomes_master_full_data_rows.csv`** (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π)
   - –°—Ç–∞—Ç—É—Å: ‚ùå **–ù–ï –æ–±–Ω–æ–≤–ª–µ–Ω**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: ‚úÖ **–î–ê** (—Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ API

2. **`cqc_carehomes_master_full_data_rows_UPDATED.csv`** (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
   - –°—Ç–∞—Ç—É—Å: ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω** (—á–µ—Ä–µ–∑ CQC API)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: ‚ùå **–ù–ï–¢** (—Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API

---

### **Staging –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**

**`carehome_staging_export.csv`**
- –ù–∞–∑–≤–∞–Ω–∏–µ: `carehome_staging_export.csv`
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Facilities –∏ Funding
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: ‚úÖ **–î–ê** (—á–µ—Ä–µ–∑ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥)
- –°–≤—è–∑—å —Å CQC: –ü–æ –ø–æ–ª—é `cqc_location_id`

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ —Å–¥–µ–ª–∞—Ç—å

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –û–±–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å `cqc_carehomes_master_full_data_rows.csv` **–Ω–∞–ø—Ä—è–º—É—é**
2. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º: `cqc_carehomes_master_full_data_rows_BACKUP.csv`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—è—Ç—å –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª**

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –ò–∑–º–µ–Ω–∏—Ç—å `cqc_data_loader.py` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ `cqc_carehomes_master_full_data_rows_UPDATED.csv`
2. –ò–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `_UPDATED.csv` –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –ò–∑–º–µ–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
2. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª

**–ö–æ–¥ (–ø—Ä–∏–º–µ—Ä):**
```python
# Create backup
backup_file = csv_dir / f"{csv_stem}_BACKUP_{datetime.now().strftime('%Y%m%d_%H%M%S')}{csv_suffix}"
shutil.copy(csv_path, backup_file)

# Update original file
save_homes_to_csv(homes, csv_path, csv_path)
```

---

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è CQC –±–∞–∑—ã
2. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

1. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `update_cqc_database.py`
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ CQC API
3. ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏: `cqc_carehomes_master_full_data_rows_UPDATED.csv`

### **–ß—Ç–æ –Ω–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

1. ‚ùå **–ù–ï –æ–±–Ω–æ–≤–ª–µ–Ω** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `cqc_carehomes_master_full_data_rows.csv`
2. ‚ùå **–ù–ï –∏–∑–º–µ–Ω–µ–Ω–∞** –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
3. ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏—è **–ù–ï –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** –≤ —Å–∏—Å—Ç–µ–º–µ

### **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
2. ‚ö†Ô∏è –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
3. ‚ö†Ô∏è –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π | –°–æ–¥–µ—Ä–∂–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
|------|--------|----------------------|---------------------|
| `cqc_carehomes_master_full_data_rows.csv` | ‚ùå –ù–µ –æ–±–Ω–æ–≤–ª–µ–Ω | ‚úÖ **–î–ê** | ‚ùå –ù–µ—Ç |
| `cqc_carehomes_master_full_data_rows_UPDATED.csv` | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω | ‚ùå **–ù–ï–¢** | ‚úÖ –î–∞ |
| `carehome_staging_export.csv` | ‚úÖ –ê–∫—Ç—É–∞–ª–µ–Ω | ‚úÖ **–î–ê** | ‚úÖ –î–∞ (Staging –¥–∞–Ω–Ω—ã–µ) |

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-20
