# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

**–î–∞—Ç–∞:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETED

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ß–∏—Å—Ç–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–±–µ–∑ I/O –∏ API)

| –°—Ü–µ–Ω–∞—Ä–∏–π | –î–æ–º–æ–≤ | Pre-filtering | Scoring | Top 5 | **–í—Å–µ–≥–æ** | –í—Ä–µ–º—è –Ω–∞ –¥–æ–º |
|----------|-------|---------------|---------|-------|-----------|--------------|
| **–õ—É—á—à–∏–π —Å–ª—É—á–∞–π** | 20 | 0.23 ms | 1.12 ms | 0.00 ms | **1.36 ms** | 0.07 ms |
| **–°—Ä–µ–¥–Ω–∏–π —Å–ª—É—á–∞–π** | 50 | 0.14 ms | 0.78 ms | 0.00 ms | **0.91 ms** | 0.02 ms |
| **–•—É–¥—à–∏–π —Å–ª—É—á–∞–π** | 100 | 0.45 ms | 2.54 ms | 0.01 ms | **3.00 ms** | 0.03 ms |

**–í—ã–≤–æ–¥:** –ê–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç—á–∏–Ω–≥–∞ **–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π** - –º–µ–Ω–µ–µ 3ms –¥–∞–∂–µ –¥–ª—è 100 –¥–æ–º–æ–≤!

---

## ‚è±Ô∏è –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

### –õ—É—á—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π (20 –¥–æ–º–æ–≤, –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–æ—Å—Ç–æ–π –æ–ø—Ä–æ—Å–Ω–∏–∫)

**–û–ø–µ—Ä–∞—Ü–∏–∏:**
1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–º–æ–≤ –∏–∑ CSV: **~50-100 ms** (I/O)
2. Pre-filtering (20 –¥–æ–º–æ–≤): **0.23 ms**
3. Scoring (20 –¥–æ–º–æ–≤): **1.12 ms**
4. Top 5 selection: **0.00 ms**
5. API enrichment –¥–ª—è —Ç–æ–ø-5: **~500-1000 ms** (CQC, Companies House - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

**–ò—Ç–æ–≥–æ:** **~0.6-1.1 —Å–µ–∫—É–Ω–¥—ã**

### –•—É–¥—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π (100 –¥–æ–º–æ–≤, sparse –¥–∞–Ω–Ω—ã–µ, —Å–ª–æ–∂–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫)

**–û–ø–µ—Ä–∞—Ü–∏–∏:**
1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–º–æ–≤ –∏–∑ CSV: **~100-200 ms** (I/O)
2. Pre-filtering (100 –¥–æ–º–æ–≤): **0.45 ms**
3. Scoring (100 –¥–æ–º–æ–≤): **2.54 ms**
4. Top 5 selection: **0.01 ms**
5. API enrichment –¥–ª—è —Ç–æ–ø-5: **~500-1000 ms** (CQC, Companies House - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

**–ò—Ç–æ–≥–æ:** **~0.6-1.2 —Å–µ–∫—É–Ω–¥—ã**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** API enrichment –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–ª—è —Ç–æ–ø-5, –ø–æ—ç—Ç–æ–º—É –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

---

## üîç –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

### –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (Big O)

| –û–ø–µ—Ä–∞—Ü–∏—è | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|----------|
| `check_field_with_fallback()` | O(1) | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ–µ –≤—Ä–µ–º—è (–º–∞–∫—Å–∏–º—É–º 2-3 proxy –ø—Ä–æ–≤–µ—Ä–∫–∏) |
| `check_care_types_v2()` | O(C) | C = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ care types (–æ–±—ã—á–Ω–æ 1-3) |
| `evaluate_home_match_v2()` | O(M + B + P) | M = medical conditions, B = behavioral, P = proxies |
| `_calculate_service_bands_score_v2()` | O(M + B) | –õ–∏–Ω–µ–π–Ω–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—Å–ª–æ–≤–∏–π |
| `calculate_100_point_match()` | O(1) | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (5) |
| **Pre-filtering (N –¥–æ–º–æ–≤)** | **O(N √ó (M + B + P))** | N –¥–æ–º–æ–≤ √ó –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| **Scoring (N –¥–æ–º–æ–≤)** | **O(N)** | –õ–∏–Ω–µ–π–Ω–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ–º–æ–≤ |
| **Top 5 selection** | **O(N log N)** | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ |

**–ò—Ç–æ–≥–æ –¥–ª—è N –¥–æ–º–æ–≤:** O(N √ó (M + B + P) + N log N) ‚âà **O(N log N)** (–¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)

### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|----------|
| Pre-filtering | O(N) | –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∞ |
| Scoring | O(N) | –•—Ä–∞–Ω–µ–Ω–∏–µ scored homes |
| Top 5 selection | O(1) | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (5) |

**–ò—Ç–æ–≥–æ:** **O(N)** - –ª–∏–Ω–µ–π–Ω–∞—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ–º–æ–≤

---

## ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, fallback —Ñ—É–Ω–∫—Ü–∏–∏, matching service)
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö proxy fields, —É—Å–ª–æ–≤–∏–π)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ dataclasses –∏ enums –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É (heap –≤–º–µ—Å—Ç–æ full sort –¥–ª—è top-5)

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Try-except –±–ª–æ–∫–∏ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è NULL –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ Graceful degradation (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (< 3ms –¥–ª—è 100 –¥–æ–º–æ–≤)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–æ–º–æ–≤)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ Pre-filtering –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–æ–º–∞ –¥–æ scoring
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–π –¥–ª—è O(1) –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- ‚úÖ –ú–∏–Ω–∏–º—É–º –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤

### 4. –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ 22 unit —Ç–µ—Å—Ç–∞ (100% –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ Edge cases –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ Integration —Ç–µ—Å—Ç—ã —Å SimpleMatchingService

### 5. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –•–æ—Ä–æ—à–∏–µ docstrings
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å type hints –≤–µ–∑–¥–µ (—á–∞—Å—Ç–∏—á–Ω–æ –µ—Å—Ç—å)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏

### 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

**–û—Ü–µ–Ω–∫–∞: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è vs. –ü—Ä–æ—Å—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–∞—è (Fallback) | –ü—Ä–æ—Å—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è |
|---------|-------------------|-------------------|
| –í—Ä–µ–º—è (100 –¥–æ–º–æ–≤) | 3 ms | ~1 ms |
| –¢–æ—á–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è (NULL handling) | –ù–∏–∑–∫–∞—è (NULL = FALSE) |
| –ü–æ–∫—Ä—ã—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö | 80%+ (proxy fields) | ~50% (—Ç–æ–ª—å–∫–æ direct) |
| –õ–æ–∂–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è | –ú–∏–Ω–∏–º—É–º | –ú–Ω–æ–≥–æ |

**–í—ã–≤–æ–¥:** –ù–µ–±–æ–ª—å—à–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (2ms) –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏–µ–º —Ç–æ—á–Ω–æ—Å—Ç–∏.

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è vs. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–∞—è (Pre-filter) | –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä |
|---------|---------------------|----------------|
| –í—Ä–µ–º—è (100 –¥–æ–º–æ–≤) | 3 ms | ~5 ms |
| –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–æ scoring) | –ù–∏–∑–∫–∞—è (scoring –≤—Å–µ—Ö) |

**–í—ã–≤–æ–¥:** Pre-filtering —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è, –∏—Å–∫–ª—é—á–∞—è –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–æ–º–∞ –¥–æ scoring.

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** ~10-20% –≤—Ä–µ–º–µ–Ω–∏

```python
from functools import lru_cache

@lru_cache(maxsize=1000)
def check_field_with_fallback_cached(home_id: str, field_name: str, required_value: bool):
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    pass
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ï—Å–ª–∏ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–æ–º–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.

### 2. Heap –¥–ª—è Top-5 (–µ—Å–ª–∏ N > 1000)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** O(N log N) ‚Üí O(N log 5) –¥–ª—è –±–æ–ª—å—à–∏—Ö N

```python
import heapq

# –í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
top_5 = heapq.nlargest(5, scored_homes, key=lambda x: x['matchScore'])
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–º–æ–≤ > 1000.

### 3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–µ—Å–ª–∏ N > 200)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** ~50% –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö N

```python
from concurrent.futures import ThreadPoolExecutor

with ThreadPoolExecutor(max_workers=4) as executor:
    results = executor.map(score_home, homes)
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–º–æ–≤ > 200 –∏ –µ—Å—Ç—å CPU cores.

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π (< 3ms –¥–ª—è 100 –¥–æ–º–æ–≤) |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê | –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å |
| **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, fallback –ª–æ–≥–∏–∫–∞ |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 22 —Ç–µ—Å—Ç–∞, 100% –ø—Ä–æ—Ö–æ–¥—è—Ç |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê | –õ–∏–Ω–µ–π–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è |
| **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞** | **‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.6/5)** | **–û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** |

---

## üéØ –í—ã–≤–æ–¥—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π:**
- –õ—É—á—à–∏–π —Å–ª—É—á–∞–π: **~0.6-1.1 —Å–µ–∫—É–Ω–¥—ã** (–≤–∫–ª—é—á–∞—è I/O –∏ API)
- –•—É–¥—à–∏–π —Å–ª—É—á–∞–π: **~0.6-1.2 —Å–µ–∫—É–Ω–¥—ã** (–≤–∫–ª—é—á–∞—è I/O –∏ API)
- –ß–∏—Å—Ç–æ–µ –≤—Ä–µ–º—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞: **< 3ms –¥–ª—è 100 –¥–æ–º–æ–≤**

‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –õ–∏–Ω–µ–π–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(N log N)
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

### –ö–∞—á–µ—Å—Ç–≤–æ

‚úÖ **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ß–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥

‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:**
- –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–∞—è

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞ (–¥–æ 100 –¥–æ–º–æ–≤). –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–æ 1000+ –¥–æ–º–æ–≤ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É.

