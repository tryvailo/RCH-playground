# –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –ë–î –≤ –∞–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç—á–∏–Ω–≥–∞

**–î–∞—Ç–∞:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 1. –†–∞—Å—à–∏—Ä–µ–Ω `db_field_extractor.py` ‚úÖ

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **`get_funding_acceptance(home, funding_type)`**
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑ –ø–ª–æ—Å–∫–∏—Ö –ø–æ–ª–µ–π
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: `self_funding`, `local_authority`, `nhs_chc`, `third_party_topup`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `True/False/None` (None = unknown, –Ω–µ FALSE)

2. **`get_review_data(home, review_type)`**
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Ç–∑—ã–≤–∞—Ö –∏–∑ –ø–ª–æ—Å–∫–∏—Ö –ø–æ–ª–µ–π –∏ JSONB
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: `average`, `count`, `google`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `review_average_score`, `review_count`, `google_rating`, `reviews_detailed` JSONB
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `float/int/None`

3. **`get_amenity_value(home, amenity_name)`** (—É–ª—É—á—à–µ–Ω–∞)
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± —É–¥–æ–±—Å—Ç–≤–∞—Ö –∏–∑ –ø–ª–æ—Å–∫–∏—Ö –ø–æ–ª–µ–π –∏ JSONB
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: `wheelchair_access`, `ensuite_rooms`, `secure_garden`, `wifi_available`, `parking_onsite`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è ‚Üí JSONB `facilities`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `True/False/None` (None = unknown, –Ω–µ FALSE)

4. **`get_availability_info(home)`**
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{'has_availability', 'beds_available', 'beds_total', 'availability_status'}`

5. **`get_year_info(home)`**
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –≥–æ–¥–∞—Ö
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{'year_opened', 'year_registered'}`

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `simple_matching_service.py` ‚úÖ

#### 2.1. `_calculate_lifestyle()` ‚úÖ

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_amenity_value()` –¥–ª—è –≤—Å–µ—Ö —É–¥–æ–±—Å—Ç–≤:
  - `secure_garden` (15 points)
  - `wheelchair_access` (10 points)
  - `wifi_available` (5 points) - **–ù–û–í–û–ï**
  - `beds_total` (10 points)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_availability_info()` –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:
  - `has_availability` (20 points)
  - `beds_available` (18 points) - **–ù–û–í–û–ï**
  - `availability_status` (15 points) - **–ù–û–í–û–ï**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_amenity_value()` –¥–ª—è `ensuite_rooms` (40 points)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ 5 —É–¥–æ–±—Å—Ç–≤ –∏ –≤—Å–µ 4 –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

---

#### 2.2. `_calculate_location()` ‚úÖ

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_amenity_value()` –¥–ª—è:
  - `parking_onsite` (5 points)
  - `wheelchair_access` (5 points)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —É–¥–æ–±—Å—Ç–≤–∞ –¥–ª—è location scoring –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

---

#### 2.3. `_calculate_data_quality_factor()` ‚úÖ

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ CQC —Ä–µ–π—Ç–∏–Ω–≥–∏ (6 –ø–æ–ª–µ–π)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —É–¥–æ–±—Å—Ç–≤–∞ (5 –ø–æ–ª–µ–π) —á–µ—Ä–µ–∑ `get_amenity_value()`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (4 –ø–æ–ª—è) —á–µ—Ä–µ–∑ `get_funding_acceptance()` - **–ù–û–í–û–ï**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–∑—ã–≤—ã (3 –ø–æ–ª—è) —á–µ—Ä–µ–∑ `get_review_data()` - **–ù–û–í–û–ï**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `get_availability_info()` - **–ù–û–í–û–ï**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è –ë–î –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö.

---

## üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π –ë–î

### ‚úÖ –ü–ª–æ—Å–∫–∏–µ –ø–æ–ª—è (55 –∏–∑ 76 = 72%)

#### –ì—Ä—É–ø–ø–∞ 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (2/3)
- ‚úÖ `id` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_location_id` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è `location_ods_code` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 2: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (1/5)
- ‚úÖ `name` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è –û—Å—Ç–∞–ª—å–Ω—ã–µ - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã (0/3)
- ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)

#### –ì—Ä—É–ø–ø–∞ 4: –ê–¥—Ä–µ—Å –∏ –ª–æ–∫–∞—Ü–∏—è (5/7)
- ‚úÖ `city` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `postcode` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `latitude` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `longitude` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `local_authority` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è `county`, `region` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 5: –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (4/7)
- ‚úÖ `beds_total` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `beds_available` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - **–ù–û–í–û–ï**
- ‚úÖ `has_availability` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - **–ù–û–í–û–ï**
- ‚úÖ `availability_status` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - **–ù–û–í–û–ï**
- ‚ö†Ô∏è `availability_last_checked`, `year_opened`, `year_registered` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 6: –õ–∏—Ü–µ–Ω–∑–∏–∏ (8/9)
- ‚úÖ `care_residential` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `care_nursing` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `care_dementia` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `has_nursing_care_license` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `has_personal_care_license` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `has_surgical_procedures_license` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `has_treatment_license` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `has_diagnostic_license` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚ö†Ô∏è `care_respite` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 7: Service User Bands (12/12) - **100%** ‚úÖ
- ‚úÖ –í—Å–µ 12 –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `get_service_user_band()`

#### –ì—Ä—É–ø–ø–∞ 8: –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (3/4)
- ‚úÖ `fee_residential_from` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `fee_nursing_from` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `fee_dementia_from` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è `fee_respite_from` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 9: –§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (4/4) - **100%** ‚úÖ - **–ù–û–í–û–ï**
- ‚úÖ `accepts_self_funding` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `accepts_local_authority` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `accepts_nhs_chc` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `accepts_third_party_topup` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)

#### –ì—Ä—É–ø–ø–∞ 10: CQC –†–µ–π—Ç–∏–Ω–≥–∏ (7/9)
- ‚úÖ `cqc_rating_overall` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_rating_safe` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_rating_effective` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_rating_caring` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_rating_responsive` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_rating_well_led` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `cqc_last_inspection_date` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è `cqc_publication_date`, `cqc_latest_report_url` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

#### –ì—Ä—É–ø–ø–∞ 11: –û—Ç–∑—ã–≤—ã (3/3) - **100%** ‚úÖ - **–ù–û–í–û–ï**
- ‚úÖ `review_average_score` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `review_count` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `google_rating` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)

#### –ì—Ä—É–ø–ø–∞ 12: –£–¥–æ–±—Å—Ç–≤–∞ (5/5) - **100%** ‚úÖ
- ‚úÖ `wheelchair_access` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `ensuite_rooms` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `secure_garden` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)
- ‚úÖ `wifi_available` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor) - **–ù–û–í–û–ï**
- ‚úÖ `parking_onsite` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ extractor)

#### –ì—Ä—É–ø–ø–∞ 13: –°—Ç–∞—Ç—É—Å (1/2)
- ‚úÖ `is_dormant` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- ‚ö†Ô∏è `data_quality_score` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∞—Ç—á–∏–Ω–≥–µ

---

### ‚úÖ JSONB –ø–æ–ª—è (5 –∏–∑ 17 = 29%)

#### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ JSONB –ø–æ–ª—è:
1. ‚úÖ `service_user_bands` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `get_service_user_band()`)
2. ‚úÖ `regulated_activities` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `get_regulated_activity()`)
3. ‚úÖ `facilities` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `get_facility_value()`, `get_amenity_value()`)
4. ‚úÖ `staff_information` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `get_staff_information()`) - –≥–æ—Ç–æ–≤–æ
5. ‚úÖ `reviews_detailed` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `get_review_data()`) - **–ù–û–í–û–ï**

#### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ JSONB –ø–æ–ª—è (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º):
- ‚ö†Ô∏è `source_urls` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è `service_types` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –º–∞—Ç—á–∏–Ω–≥–∞
- ‚ö†Ô∏è `medical_specialisms` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π
- ‚ö†Ô∏è `dietary_options` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
- ‚ö†Ô∏è `activities` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è lifestyle scoring
- ‚ö†Ô∏è `pricing_details` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ budget matching
- ‚ö†Ô∏è `media` - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚ö†Ô∏è `location_context` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è location scoring
- ‚ö†Ô∏è `building_info` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è building quality
- ‚ö†Ô∏è `accreditations` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è quality scoring
- ‚ö†Ô∏è `source_metadata` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è `extra` - flexible field

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NULL ‚úÖ

**–î–æ:**
```python
serves_dementia = home.get('serves_dementia_band', False)
# NULL ‚Üí False (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
```

**–ü–æ—Å–ª–µ:**
```python
serves_dementia = get_service_user_band(home, 'dementia_band')
# NULL ‚Üí None (–ø—Ä–∞–≤–∏–ª—å–Ω–æ! unknown, –Ω–µ FALSE)
```

---

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSONB –∫–∞–∫ fallback ‚úÖ

**–î–æ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è
- –ï—Å–ª–∏ –ø–æ–ª–µ NULL, —Å—á–∏—Ç–∞–ª–æ—Å—å FALSE

**–ü–æ—Å–ª–µ:**
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è, –∏ JSONB
- –ï—Å–ª–∏ –ø–ª–æ—Å–∫–æ–µ –ø–æ–ª–µ NULL, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è JSONB
- NULL ‚â† FALSE (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

---

### 3. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚úÖ

**100% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ Service User Bands (12/12)
- ‚úÖ –§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (4/4) - **–ù–û–í–û–ï**
- ‚úÖ –û—Ç–∑—ã–≤—ã (3/3) - **–ù–û–í–û–ï**
- ‚úÖ –£–¥–æ–±—Å—Ç–≤–∞ (5/5)

**–í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ –õ–∏—Ü–µ–Ω–∑–∏–∏ (8/9 = 89%)
- ‚úÖ CQC –†–µ–π—Ç–∏–Ω–≥–∏ (7/9 = 78%)
- ‚úÖ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (3/4 = 75%)

---

## üìã –ú–µ—Ç–æ–¥—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –≤—Å–µ –ø–æ–ª—è –ë–î

### `_calculate_medical_safety()`
- ‚úÖ Service User Bands (—á–µ—Ä–µ–∑ `get_service_user_band()`)
- ‚úÖ Licenses (—á–µ—Ä–µ–∑ `get_regulated_activity()`)
- ‚úÖ CQC Ratings (—á–µ—Ä–µ–∑ `get_cqc_rating()`)
- ‚úÖ Amenities (—á–µ—Ä–µ–∑ `get_amenity_value()`)

### `_calculate_quality_care()`
- ‚úÖ –í—Å–µ 6 CQC Ratings (—á–µ—Ä–µ–∑ `get_cqc_rating()`)
- ‚úÖ Inspection Date (—á–µ—Ä–µ–∑ `get_inspection_date()`)

### `_calculate_financial()`
- ‚úÖ Budget Match (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ fee_* –ø–æ–ª—è)
- ‚úÖ Companies House API data

### `_calculate_location()`
- ‚úÖ Distance calculation
- ‚úÖ Amenities (—á–µ—Ä–µ–∑ `get_amenity_value()`)

### `_calculate_lifestyle()`
- ‚úÖ Room Quality (—á–µ—Ä–µ–∑ `get_amenity_value()`)
- ‚úÖ Facilities (—á–µ—Ä–µ–∑ `get_amenity_value()`)
- ‚úÖ Availability (—á–µ—Ä–µ–∑ `get_availability_info()`)

### `_calculate_data_quality_factor()`
- ‚úÖ –í—Å–µ CQC Ratings
- ‚úÖ –í—Å–µ Amenities (—á–µ—Ä–µ–∑ `get_amenity_value()`)
- ‚úÖ –§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (—á–µ—Ä–µ–∑ `get_funding_acceptance()`) - **–ù–û–í–û–ï**
- ‚úÖ –û—Ç–∑—ã–≤—ã (—á–µ—Ä–µ–∑ `get_review_data()`) - **–ù–û–í–û–ï**
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (—á–µ—Ä–µ–∑ `get_availability_info()`) - **–ù–û–í–û–ï**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

### Unit Tests ‚úÖ
- ‚úÖ –í—Å–µ extractor —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NULL (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç None, –Ω–µ False)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSONB fallback

### Integration Tests ‚úÖ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `check_field_with_fallback()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `simple_matching_service.py` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç extractor —Ñ—É–Ω–∫—Ü–∏–∏

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ê–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ç—á–∏–Ω–≥–∞ —Ç–µ–ø–µ—Ä—å:**
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è –∏–∑ –ë–î (55/76 = 72%)
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç JSONB –ø–æ–ª—è –∫–∞–∫ fallback (5/17 = 29%)
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç NULL (NULL ‚â† FALSE)
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 12 Service User Bands (100%)
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 14 Regulated Activities —á–µ—Ä–µ–∑ JSONB
6. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 6 CQC —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (100%)
7. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 5 —É–¥–æ–±—Å—Ç–≤ (100%)
8. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 4 –ø–æ–ª—è —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è (100%) - **–ù–û–í–û–ï**
9. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 3 –ø–æ–ª—è –æ—Ç–∑—ã–≤–æ–≤ (100%) - **–ù–û–í–û–ï**
10. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 4 –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (100%) - **–ù–û–í–û–ï**

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î!**

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–û–õ–Ø –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø

